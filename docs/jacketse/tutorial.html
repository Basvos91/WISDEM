
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>5. Tutorial &#8212; JacketSE 0.1.1 documentation</title>
    <link rel="stylesheet" href="_static/nrel.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="4. Theory" href="theory.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="theory.html" title="4. Theory"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">JacketSE 0.1.1 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="tutorial">
<h1>5. Tutorial<a class="headerlink" href="#tutorial" title="Permalink to this headline">¶</a></h1>
<p>Two examples are included in this tutorial section: simulation of a jacket-tower, and optimization of a jacket-tower support structure.</p>
<div class="section" id="mw-jacket-tower-in-30-m-waters">
<h2>5.1. 5-MW Jacket Tower in 30 m Waters<a class="headerlink" href="#mw-jacket-tower-in-30-m-waters" title="Permalink to this headline">¶</a></h2>
<p>This example demonstrates how to setup and run <em>analysis</em> for a jacket-tower support structure.
The structure looks as shown in Figure <a class="reference internal" href="#jackettut-fig"><span class="std std-ref">Jacket-tower structure for the tutorial example.</span></a> :</p>
<div class="figure align-center" id="id1">
<span id="jackettut-fig"></span><a class="reference internal image-reference" href="_images/jacket_tower_tut.png"><img alt="_images/jacket_tower_tut.png" src="_images/jacket_tower_tut.png" style="width: 6in;" /></a>
<p class="caption"><span class="caption-text">Figure 1: Jacket-tower structure for the tutorial example.</span></p>
</div>
<p>First, we set up the jacket geometry parameters:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>    <span class="n">Jcktins</span><span class="o">=</span><span class="n">JcktGeoInputs</span><span class="p">()</span>
    <span class="n">Jcktins</span><span class="o">.</span><span class="n">nlegs</span> <span class="o">=</span><span class="mi">4</span>
    <span class="n">Jcktins</span><span class="o">.</span><span class="n">nbays</span> <span class="o">=</span><span class="mi">5</span>
    <span class="n">Jcktins</span><span class="o">.</span><span class="n">batter</span><span class="o">=</span><span class="mf">12.</span>
    <span class="n">Jcktins</span><span class="o">.</span><span class="n">dck_botz</span> <span class="o">=</span><span class="mf">16.</span>
    <span class="n">Jcktins</span><span class="o">.</span><span class="n">dck_width</span><span class="o">=</span><span class="mi">2</span><span class="o">*</span><span class="mf">6.</span>
    <span class="n">Jcktins</span><span class="o">.</span><span class="n">weld2D</span>   <span class="o">=</span><span class="mf">0.5</span>
    <span class="n">Jcktins</span><span class="o">.</span><span class="n">VPFlag</span> <span class="o">=</span> <span class="bp">True</span>    <span class="c1">#vertical pile T/F;  to enable piles in frame3DD set pileinputs.ndiv&gt;0</span>
    <span class="n">Jcktins</span><span class="o">.</span><span class="n">clamped</span><span class="o">=</span> <span class="bp">False</span>    <span class="c1">#whether or not the bottom of the structure is rigidly connected. Use False when equivalent spring constants are being used.</span>
    <span class="n">Jcktins</span><span class="o">.</span><span class="n">AFflag</span> <span class="o">=</span> <span class="bp">False</span>  <span class="c1">#whether or not to use apparent fixity piles</span>
    <span class="n">Jcktins</span><span class="o">.</span><span class="n">PreBuildTPLvl</span> <span class="o">=</span> <span class="mi">5</span>  <span class="c1">#if &gt;0, the TP is prebuilt according to rules per PreBuildTP</span>

</pre></div>
</div>
<p>Then we set up various component inputs. Start with the soil stratigraphy:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>    <span class="n">Soilinputs</span><span class="o">=</span><span class="n">SoilGeoInputs</span><span class="p">()</span>
    <span class="n">Soilinputs</span><span class="o">.</span><span class="n">zbots</span>   <span class="o">=-</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">3.</span><span class="p">,</span><span class="mf">5.</span><span class="p">,</span><span class="mf">7.</span><span class="p">,</span><span class="mf">15.</span><span class="p">,</span><span class="mf">30.</span><span class="p">,</span><span class="mf">50.</span><span class="p">])</span>
    <span class="n">Soilinputs</span><span class="o">.</span><span class="n">gammas</span>  <span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">10000.</span><span class="p">,</span><span class="mf">10000.</span><span class="p">,</span><span class="mf">10000.</span><span class="p">,</span><span class="mf">10000.</span><span class="p">,</span><span class="mf">10000.</span><span class="p">,</span><span class="mf">10000.</span><span class="p">])</span>
    <span class="n">Soilinputs</span><span class="o">.</span><span class="n">cus</span>     <span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">60000.</span><span class="p">,</span><span class="mf">60000.</span><span class="p">,</span><span class="mf">60000.</span><span class="p">,</span><span class="mf">60000.</span><span class="p">,</span><span class="mf">60000.</span><span class="p">,</span><span class="mf">60000.</span><span class="p">])</span>
    <span class="n">Soilinputs</span><span class="o">.</span><span class="n">phis</span>    <span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">26.</span><span class="p">,</span><span class="mf">26.</span><span class="p">,</span><span class="mf">26.</span><span class="p">,</span><span class="mf">26.</span><span class="p">,</span><span class="mf">26.</span><span class="p">,</span><span class="mi">26</span><span class="p">])</span><span class="c1">#np.array([36.,33.,26.,37.,35.,37.5])#np.array([36.,33.,26.,37.,35.,37.5])</span>
    <span class="n">Soilinputs</span><span class="o">.</span><span class="n">delta</span>   <span class="o">=</span><span class="mf">25.</span>
    <span class="n">Soilinputs</span><span class="o">.</span><span class="n">sndflg</span>   <span class="o">=</span><span class="bp">True</span>
    <span class="n">Soilinputs</span><span class="o">.</span><span class="n">PenderSwtch</span>   <span class="o">=</span><span class="bp">False</span> <span class="c1">#True</span>
    <span class="n">Soilinputs</span><span class="o">.</span><span class="n">SoilSF</span>   <span class="o">=</span><span class="mf">1.</span>

    <span class="n">Soilinputs2</span><span class="o">=</span><span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">Soilinputs</span><span class="p">)</span> <span class="c1">#Parked case. We assume same stiffness although this may not be the case under a different load</span>

</pre></div>
</div>
<p>Then assign water and wind environmental parameters:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>    <span class="n">Waterinputs</span><span class="o">=</span><span class="n">WaterInputs</span><span class="p">()</span>
    <span class="n">Waterinputs</span><span class="o">.</span><span class="n">wdepth</span>   <span class="o">=</span><span class="mf">30.</span>
    <span class="n">Waterinputs</span><span class="o">.</span><span class="n">wlevel</span>   <span class="o">=</span><span class="mf">30.</span> <span class="c1">#Distance from bottom of structure to surface  THIS, I believe is no longer needed as piles may be negative in z, to check and remove in case</span>
    <span class="n">Waterinputs</span><span class="o">.</span><span class="n">T</span><span class="o">=</span><span class="mf">12.</span>  <span class="c1">#Wave Period</span>
    <span class="n">Waterinputs</span><span class="o">.</span><span class="n">HW</span><span class="o">=</span><span class="mf">10.</span> <span class="c1">#Wave Height</span>
    <span class="n">Waterinputs</span><span class="o">.</span><span class="n">Cd</span><span class="o">=</span><span class="mf">3.</span>  <span class="c1">#Drag Coefficient, enhanced to account for marine growth and other members not calculated</span>
    <span class="n">Waterinputs</span><span class="o">.</span><span class="n">Cm</span><span class="o">=</span><span class="mf">8.</span><span class="c1">#2.  #ADded mass Coefficient</span>

    <span class="n">Waterinputs2</span><span class="o">=</span><span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">Waterinputs</span><span class="p">)</span>  <span class="c1">#PARKED CONDITIONS - still max wave here</span>
    <span class="n">Waterinputs</span><span class="o">.</span><span class="n">T</span><span class="o">=</span><span class="mf">8.</span>  <span class="c1">#Wave Period</span>
    <span class="n">Waterinputs</span><span class="o">.</span><span class="n">HW</span><span class="o">=</span><span class="mf">4.</span> <span class="c1">#Wave Height</span>

    <span class="n">Windinputs</span><span class="o">=</span><span class="n">WindInputs</span><span class="p">()</span>
    <span class="n">Windinputs</span><span class="o">.</span><span class="n">Cdj</span><span class="o">=</span><span class="mf">4.</span>  <span class="c1">#Drag Coefficient for jacket members, enhanced to account for TP drag not calculated otherwise</span>
    <span class="n">Windinputs</span><span class="o">.</span><span class="n">Cdt</span><span class="o">=</span><span class="mi">2</span>  <span class="c1">#Drag Coefficient for tower, enhanced to account for TP drag not calculated otherwise</span>
    <span class="n">Windinputs</span><span class="o">.</span><span class="n">HH</span><span class="o">=</span><span class="mf">100.</span> <span class="c1">#CHECK HOW THIS COMPLIES....</span>
    <span class="n">Windinputs</span><span class="o">.</span><span class="n">U50HH</span><span class="o">=</span><span class="mf">30.</span> <span class="c1">#assumed gust speed</span>

</pre></div>
</div>
<p>Now it is time to assign properties for the various member classes of the structure.</p>
<p>We will follow a bottom up approach, where the definitions are offered from the bottom members towards the top ones.</p>
<p>Start with the piles:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>    <span class="n">Pilematin</span><span class="o">=</span><span class="n">MatInputs</span><span class="p">()</span>
    <span class="n">Pilematin</span><span class="o">.</span><span class="n">matname</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="s1">&#39;steel&#39;</span><span class="p">])</span>
    <span class="n">Pilematin</span><span class="o">.</span><span class="n">E</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span> <span class="mf">25.e9</span><span class="p">])</span>
    <span class="n">Dpile</span><span class="o">=</span><span class="mf">2.5</span><span class="c1">#0.75 # 2.0</span>
    <span class="n">tpile</span><span class="o">=</span><span class="mf">0.01</span>
    <span class="n">Lp</span><span class="o">=</span><span class="mf">20.</span> <span class="c1">#45</span>

    <span class="n">Pileinputs</span><span class="o">=</span><span class="n">PileGeoInputs</span><span class="p">()</span>
    <span class="n">Pileinputs</span><span class="o">.</span><span class="n">Pilematins</span><span class="o">=</span><span class="n">Pilematin</span>
    <span class="n">Pileinputs</span><span class="o">.</span><span class="n">ndiv</span><span class="o">=</span><span class="mi">0</span> <span class="c1">#3</span>
    <span class="n">Pileinputs</span><span class="o">.</span><span class="n">Dpile</span><span class="o">=</span><span class="n">Dpile</span>
    <span class="n">Pileinputs</span><span class="o">.</span><span class="n">tpile</span><span class="o">=</span><span class="n">tpile</span>
    <span class="n">Pileinputs</span><span class="o">.</span><span class="n">Lp</span><span class="o">=</span><span class="n">Lp</span> <span class="c1">#[m] Embedment length</span>

</pre></div>
</div>
<p>Then continue with the main legs:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>    <span class="n">legmatin</span><span class="o">=</span><span class="n">MatInputs</span><span class="p">()</span>
    <span class="n">legmatin</span><span class="o">.</span><span class="n">matname</span><span class="o">=</span><span class="p">([</span><span class="s1">&#39;heavysteel&#39;</span><span class="p">,</span><span class="s1">&#39;heavysteel&#39;</span><span class="p">,</span><span class="s1">&#39;heavysteel&#39;</span><span class="p">,</span><span class="s1">&#39;heavysteel&#39;</span><span class="p">])</span>
    <span class="c1">#legmatin.E=np.array([2.0e11])</span>
    <span class="n">Dleg</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">1.5</span><span class="p">,</span><span class="mf">1.5</span><span class="p">,</span><span class="mf">1.5</span><span class="p">,</span><span class="mf">1.5</span><span class="p">,</span><span class="mf">1.5</span><span class="p">,</span><span class="mf">1.5</span><span class="p">])</span>
    <span class="n">tleg</span><span class="o">=</span><span class="mf">1.5</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.0254</span><span class="p">])</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="n">Dleg</span><span class="o">.</span><span class="n">size</span><span class="p">)</span>
    <span class="n">leginputs</span><span class="o">=</span><span class="n">LegGeoInputs</span><span class="p">()</span>
    <span class="n">leginputs</span><span class="o">.</span><span class="n">legZbot</span>   <span class="o">=</span> <span class="mf">1.0</span>
    <span class="n">leginputs</span><span class="o">.</span><span class="n">ndiv</span><span class="o">=</span><span class="mi">1</span>
    <span class="n">leginputs</span><span class="o">.</span><span class="n">legmatins</span><span class="o">=</span><span class="n">legmatin</span>
    <span class="n">leginputs</span><span class="o">.</span><span class="n">Dleg0</span><span class="o">=</span><span class="n">Dleg</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">leginputs</span><span class="o">.</span><span class="n">tleg0</span><span class="o">=</span><span class="n">tleg</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

    <span class="n">legbot_stmphin</span> <span class="o">=</span><span class="mf">1.5</span>  <span class="c1">#Distance from bottom of leg to second joint along z; must be&gt;0</span>

</pre></div>
</div>
<p>Then move on to the X-braces:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>    <span class="n">Xbrcmatin</span><span class="o">=</span><span class="n">MatInputs</span><span class="p">()</span>
    <span class="n">Xbrcmatin</span><span class="o">.</span><span class="n">matname</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="s1">&#39;heavysteel&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="n">Jcktins</span><span class="o">.</span><span class="n">nbays</span><span class="p">)</span>
    <span class="c1">#Xbrcmatin.E=np.array([ 2.2e11, 2.0e11,2.0e11,2.0e11,2.0e11])</span>
    <span class="n">Dbrc</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">1.</span><span class="p">,</span><span class="mf">1.</span><span class="p">,</span><span class="mf">1.0</span><span class="p">,</span><span class="mf">1.0</span><span class="p">,</span><span class="mf">1.0</span><span class="p">])</span>
    <span class="n">tbrc</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">1.</span><span class="p">,</span><span class="mf">1.</span><span class="p">,</span><span class="mf">1.0</span><span class="p">,</span><span class="mf">1.0</span><span class="p">,</span><span class="mf">1.0</span><span class="p">])</span><span class="o">*</span><span class="mf">0.0254</span>

    <span class="n">Xbrcinputs</span><span class="o">=</span><span class="n">XBrcGeoInputs</span><span class="p">()</span>
    <span class="n">Xbrcinputs</span><span class="o">.</span><span class="n">Dbrc0</span><span class="o">=</span><span class="n">Dbrc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">Xbrcinputs</span><span class="o">.</span><span class="n">tbrc0</span><span class="o">=</span><span class="n">tbrc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">Xbrcinputs</span><span class="o">.</span><span class="n">ndiv</span><span class="o">=</span><span class="mi">2</span><span class="c1">#2</span>
    <span class="n">Xbrcinputs</span><span class="o">.</span><span class="n">Xbrcmatins</span><span class="o">=</span><span class="n">Xbrcmatin</span>
    <span class="n">Xbrcinputs</span><span class="o">.</span><span class="n">precalc</span><span class="o">=</span><span class="bp">False</span> <span class="c1">#True   #This can be set to true if we want Xbraces to be precalculated in D and t, in which case the above set Dbrc and tbrc would be overwritten</span>

</pre></div>
</div>
<p>In this example we are considering the Mud-braces. They normally mitigate stress concentrations at the pile-leg connections and provide some torsional stiffness:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>    <span class="n">Mbrcmatin</span><span class="o">=</span><span class="n">MatInputs</span><span class="p">()</span>
    <span class="n">Mbrcmatin</span><span class="o">.</span><span class="n">matname</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="s1">&#39;heavysteel&#39;</span><span class="p">])</span>
    <span class="c1">#Mbrcmatin.E=np.array([ 2.5e11])</span>
    <span class="n">Dbrc_mud</span><span class="o">=</span><span class="mf">1.5</span>

    <span class="n">Mbrcinputs</span><span class="o">=</span><span class="n">MudBrcGeoInputs</span><span class="p">()</span>
    <span class="n">Mbrcinputs</span><span class="o">.</span><span class="n">Dbrc_mud</span><span class="o">=</span><span class="n">Dbrc_mud</span>
    <span class="n">Mbrcinputs</span><span class="o">.</span><span class="n">ndiv</span><span class="o">=</span><span class="mi">2</span>
    <span class="n">Mbrcinputs</span><span class="o">.</span><span class="n">Mbrcmatins</span><span class="o">=</span><span class="n">Mbrcmatin</span>
    <span class="n">Mbrcinputs</span><span class="o">.</span><span class="n">precalc</span><span class="o">=</span><span class="bp">False</span> <span class="c1">#True   #This can be set to true if we want Mudbrace to be precalculated in D and t, in which case the above set Dbrc_mud and tbrc_mud would be overwritten</span>

</pre></div>
</div>
<p>In this case we are not considering a top horizontal brace below the main perimeter girder of the TP, so we will set its <em>ndiv</em> to 0:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>    <span class="n">Hbrcmatin</span><span class="o">=</span><span class="n">MatInputs</span><span class="p">()</span>
    <span class="n">Hbrcmatin</span><span class="o">.</span><span class="n">matname</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="s1">&#39;heavysteel&#39;</span><span class="p">])</span>
    <span class="n">Hbrcmatin</span><span class="o">.</span><span class="n">E</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span> <span class="mf">2.5e11</span><span class="p">])</span>
    <span class="n">Dbrc_hbrc</span><span class="o">=</span><span class="mf">1.1</span>

    <span class="n">Hbrcinputs</span><span class="o">=</span><span class="n">HBrcGeoInputs</span><span class="p">()</span>
    <span class="n">Hbrcinputs</span><span class="o">.</span><span class="n">Dbrch</span><span class="o">=</span><span class="n">Dbrc_hbrc</span>
    <span class="n">Hbrcinputs</span><span class="o">.</span><span class="n">ndiv</span><span class="o">=</span><span class="mi">0</span><span class="c1">#2</span>
    <span class="n">Hbrcinputs</span><span class="o">.</span><span class="n">Hbrcmatins</span><span class="o">=</span><span class="n">Hbrcmatin</span>
    <span class="n">Hbrcinputs</span><span class="o">.</span><span class="n">precalc</span><span class="o">=</span><span class="bp">True</span>   <span class="c1">#This can be set to true if we want Hbrace to be set=Xbrace top D and t, in which case the above set Dbrch and tbrch would be overwritten</span>

</pre></div>
</div>
<p>The next step consists of declaring the transition piece properties.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>    <span class="n">TPlumpinputs</span><span class="o">=</span><span class="n">TPlumpMass</span><span class="p">()</span>
    <span class="n">TPlumpinputs</span><span class="o">.</span><span class="n">mass</span><span class="o">=</span><span class="mf">200.e3</span> <span class="c1">#[kg]</span>

    <span class="n">TPstmpsmatin</span><span class="o">=</span><span class="n">MatInputs</span><span class="p">()</span>
    <span class="n">TPbrcmatin</span><span class="o">=</span><span class="n">MatInputs</span><span class="p">()</span>
    <span class="n">TPstemmatin</span><span class="o">=</span><span class="n">MatInputs</span><span class="p">()</span>
    <span class="n">TPbrcmatin</span><span class="o">.</span><span class="n">matname</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="s1">&#39;heavysteel&#39;</span><span class="p">])</span>
    <span class="c1">#TPbrcmatin.E=np.array([ 2.5e11])</span>
    <span class="n">TPstemmatin</span><span class="o">.</span><span class="n">matname</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="s1">&#39;heavysteel&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
    <span class="c1">#TPstemmatin.E=np.array([ 2.1e11]).repeat(2)</span>

    <span class="n">TPinputs</span><span class="o">=</span><span class="n">TPGeoInputs</span><span class="p">()</span>
    <span class="n">TPinputs</span><span class="o">.</span><span class="n">TPbrcmatins</span><span class="o">=</span><span class="n">TPbrcmatin</span>
    <span class="n">TPinputs</span><span class="o">.</span><span class="n">TPstemmatins</span><span class="o">=</span><span class="n">TPstemmatin</span>
    <span class="n">TPinputs</span><span class="o">.</span><span class="n">TPstmpmatins</span><span class="o">=</span><span class="n">TPstmpsmatin</span>
    <span class="n">TPinputs</span><span class="o">.</span><span class="n">Dstrut</span><span class="o">=</span><span class="n">leginputs</span><span class="o">.</span><span class="n">Dleg</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">TPinputs</span><span class="o">.</span><span class="n">tstrut</span><span class="o">=</span><span class="n">leginputs</span><span class="o">.</span><span class="n">tleg</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">TPinputs</span><span class="o">.</span><span class="n">Dgir</span><span class="o">=</span><span class="n">Dbrc_hbrc</span>
    <span class="n">TPinputs</span><span class="o">.</span><span class="n">tgir</span><span class="o">=</span><span class="mf">0.0254</span>
    <span class="n">TPinputs</span><span class="o">.</span><span class="n">Dbrc</span><span class="o">=</span><span class="mf">1.1</span>
    <span class="n">TPinputs</span><span class="o">.</span><span class="n">Dbrc</span><span class="o">=</span><span class="n">TPinputs</span><span class="o">.</span><span class="n">Dgir</span>
    <span class="n">TPinputs</span><span class="o">.</span><span class="n">tbrc</span><span class="o">=</span><span class="n">TPinputs</span><span class="o">.</span><span class="n">tgir</span>

    <span class="n">TPinputs</span><span class="o">.</span><span class="n">hstump</span><span class="o">=</span><span class="mf">1.0</span><span class="c1">#1.0</span>
    <span class="n">TPinputs</span><span class="o">.</span><span class="n">Dstump</span><span class="o">=</span><span class="mf">1.25</span><span class="c1">#1.0</span>
    <span class="n">TPinputs</span><span class="o">.</span><span class="n">stumpndiv</span><span class="o">=</span><span class="mi">1</span><span class="c1">#2</span>
    <span class="n">TPinputs</span><span class="o">.</span><span class="n">brcndiv</span><span class="o">=</span><span class="mi">1</span><span class="c1">#2</span>
    <span class="n">TPinputs</span><span class="o">.</span><span class="n">girndiv</span><span class="o">=</span><span class="mi">1</span><span class="c1">#2</span>
    <span class="n">TPinputs</span><span class="o">.</span><span class="n">strutndiv</span><span class="o">=</span><span class="mi">1</span><span class="c1">#2</span>
    <span class="n">TPinputs</span><span class="o">.</span><span class="n">stemndiv</span><span class="o">=</span><span class="mi">1</span><span class="c1">#2</span>
    <span class="n">TPinputs</span><span class="o">.</span><span class="n">nstems</span><span class="o">=</span><span class="mi">3</span>
    <span class="n">TPinputs</span><span class="o">.</span><span class="n">Dstem</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">6.</span><span class="p">])</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="n">TPinputs</span><span class="o">.</span><span class="n">nstems</span><span class="p">)</span>
    <span class="n">TPinputs</span><span class="o">.</span><span class="n">tstem</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.1</span><span class="p">,</span><span class="mf">0.11</span><span class="p">,</span><span class="mf">0.11</span><span class="p">])</span>
    <span class="n">TPinputs</span><span class="o">.</span><span class="n">hstem</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">6.</span><span class="o">/</span><span class="n">TPinputs</span><span class="o">.</span><span class="n">nstems</span><span class="p">])</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="n">TPinputs</span><span class="o">.</span><span class="n">nstems</span><span class="p">)</span>

</pre></div>
</div>
<p>Then the tower geometry is assigned:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>    <span class="n">Twrmatin</span><span class="o">=</span><span class="n">MatInputs</span><span class="p">()</span>
    <span class="n">Twrmatin</span><span class="o">.</span><span class="n">matname</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="s1">&#39;heavysteel&#39;</span><span class="p">])</span>
    <span class="c1">#Twrmatin.E=np.array([ 2.77e11])</span>
    <span class="n">Twrinputs</span><span class="o">=</span><span class="n">TwrGeoInputs</span><span class="p">()</span>
    <span class="n">Twrinputs</span><span class="o">.</span><span class="n">Twrmatins</span><span class="o">=</span><span class="n">Twrmatin</span>
    <span class="c1">#Twrinputs.Htwr=70.  #Trumped by HH</span>
    <span class="n">Twrinputs</span><span class="o">.</span><span class="n">Htwr2frac</span><span class="o">=</span><span class="mf">0.2</span>   <span class="c1">#fraction of tower height with constant x-section</span>
    <span class="n">Twrinputs</span><span class="o">.</span><span class="n">ndiv</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">6</span><span class="p">,</span><span class="mi">12</span><span class="p">])</span>  <span class="c1">#ndiv for uniform and tapered section</span>
    <span class="n">Twrinputs</span><span class="o">.</span><span class="n">DeltaZmax</span><span class="o">=</span> <span class="mf">6.</span> <span class="c1">#[m], maximum FE element length allowed in the tower members (i.e. the uniform and the tapered members)</span>
    <span class="n">Twrinputs</span><span class="o">.</span><span class="n">Db</span><span class="o">=</span><span class="mf">5.6</span>
    <span class="n">Twrinputs</span><span class="o">.</span><span class="n">DTRb</span><span class="o">=</span><span class="mf">130.</span>
    <span class="n">Twrinputs</span><span class="o">.</span><span class="n">DTRt</span><span class="o">=</span><span class="mf">150.</span>
    <span class="n">Twrinputs</span><span class="o">.</span><span class="n">Dt</span><span class="o">=</span><span class="mf">0.55</span><span class="o">*</span><span class="n">Twrinputs</span><span class="o">.</span><span class="n">Db</span>
</pre></div>
</div>
<p>Then the RNA mass properties are specified:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>    <span class="n">RNA_F</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">1000.e3</span><span class="p">,</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.</span><span class="p">])</span>    <span class="c1">#operational</span>
    <span class="n">RNA_F2</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">500.e3</span><span class="p">,</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.</span><span class="p">])</span>    <span class="c1">#Parked</span>
</pre></div>
</div>
<p>Then assign the RNA aerodynamic loads:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>    <span class="n">RNA_F</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">1000.e3</span><span class="p">,</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.</span><span class="p">])</span>    <span class="c1">#operational</span>
    <span class="n">RNA_F2</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">500.e3</span><span class="p">,</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.</span><span class="p">])</span>    <span class="c1">#Parked</span>
</pre></div>
</div>
<p>Finally auxiliary parameters for the Frame3DD solver may be assigned:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>    <span class="n">FrameAuxIns</span><span class="o">=</span><span class="n">Frame3DDaux</span><span class="p">()</span>
    <span class="n">FrameAuxIns</span><span class="o">.</span><span class="n">sh_fg</span><span class="o">=</span><span class="mi">1</span>               <span class="c1">#shear flag--&gt;Timoshenko</span>
    <span class="n">FrameAuxIns</span><span class="o">.</span><span class="n">deltaz</span><span class="o">=</span><span class="mf">5.</span>
    <span class="n">FrameAuxIns</span><span class="o">.</span><span class="n">geo_fg</span><span class="o">=</span><span class="mi">0</span>
    <span class="n">FrameAuxIns</span><span class="o">.</span><span class="n">nModes</span> <span class="o">=</span> <span class="mi">6</span>             <span class="c1"># number of desired dynamic modes of vibration</span>
    <span class="n">FrameAuxIns</span><span class="o">.</span><span class="n">Mmethod</span> <span class="o">=</span> <span class="mi">1</span>            <span class="c1"># 1: subspace Jacobi     2: Stodola</span>
    <span class="n">FrameAuxIns</span><span class="o">.</span><span class="n">lump</span> <span class="o">=</span> <span class="mi">0</span>               <span class="c1"># 0: consistent mass ... 1: lumped mass matrix</span>
    <span class="n">FrameAuxIns</span><span class="o">.</span><span class="n">tol</span> <span class="o">=</span> <span class="mf">1e-9</span>             <span class="c1"># mode shape tolerance</span>
    <span class="n">FrameAuxIns</span><span class="o">.</span><span class="n">shift</span> <span class="o">=</span> <span class="mf">0.0</span>            <span class="c1"># shift value ... for unrestrained structures</span>
    <span class="n">FrameAuxIns</span><span class="o">.</span><span class="n">gvector</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.</span><span class="p">,</span><span class="o">-</span><span class="mf">9.8065</span><span class="p">])</span>    <span class="c1">#GRAVITY</span>
</pre></div>
</div>
<p>It is then time to launch the assembly and pass all the inputs to it; note that the assembly is called with parameters depending on the selected inputs:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>
    <span class="n">myjckt</span><span class="o">=</span><span class="n">set_as_top</span><span class="p">(</span><span class="n">JacketSE</span><span class="p">(</span><span class="n">Jcktins</span><span class="o">.</span><span class="n">clamped</span><span class="p">,</span><span class="n">Jcktins</span><span class="o">.</span><span class="n">AFflag</span><span class="p">,</span><span class="n">twodlcs</span><span class="o">=</span><span class="n">twodlcs</span><span class="p">))</span> <span class="c1">##(Jcktins.PreBuildTPLvl&gt;0),</span>

    <span class="c1">#Pass all inputs to assembly</span>
    <span class="n">myjckt</span><span class="o">.</span><span class="n">JcktGeoIn</span><span class="o">=</span><span class="n">Jcktins</span>

    <span class="n">myjckt</span><span class="o">.</span><span class="n">Soilinputs</span><span class="o">=</span><span class="n">Soilinputs</span>
    <span class="n">myjckt</span><span class="o">.</span><span class="n">Soilinputs2</span><span class="o">=</span><span class="n">Soilinputs2</span>   <span class="c1">#Parked conditions</span>

    <span class="n">myjckt</span><span class="o">.</span><span class="n">Waterinputs</span><span class="o">=</span><span class="n">Waterinputs</span>
    <span class="n">myjckt</span><span class="o">.</span><span class="n">Windinputs</span><span class="o">=</span><span class="n">Windinputs</span>
    <span class="n">myjckt</span><span class="o">.</span><span class="n">RNA_F</span><span class="o">=</span><span class="n">RNA_F</span>
    <span class="n">myjckt</span><span class="o">.</span><span class="n">Waterinputs2</span><span class="o">=</span><span class="n">Waterinputs2</span> <span class="c1">#Parked conditions</span>
    <span class="n">myjckt</span><span class="o">.</span><span class="n">Windinputs2</span><span class="o">=</span><span class="n">Windinputs2</span>   <span class="c1">#Parked conditions</span>
    <span class="n">myjckt</span><span class="o">.</span><span class="n">RNA_F2</span><span class="o">=</span><span class="n">RNA_F2</span>            <span class="c1">#Parked conditions</span>

    <span class="n">myjckt</span><span class="o">.</span><span class="n">Pileinputs</span><span class="o">=</span><span class="n">Pileinputs</span>
    <span class="n">myjckt</span><span class="o">.</span><span class="n">leginputs</span><span class="o">=</span><span class="n">leginputs</span>
    <span class="n">myjckt</span><span class="o">.</span><span class="n">legbot_stmphin</span> <span class="o">=</span><span class="n">legbot_stmphin</span>
    <span class="n">myjckt</span><span class="o">.</span><span class="n">Xbrcinputs</span><span class="o">=</span><span class="n">Xbrcinputs</span>
    <span class="n">myjckt</span><span class="o">.</span><span class="n">Mbrcinputs</span><span class="o">=</span><span class="n">Mbrcinputs</span>
    <span class="n">myjckt</span><span class="o">.</span><span class="n">Hbrcinputs</span><span class="o">=</span><span class="n">Hbrcinputs</span>
    <span class="n">myjckt</span><span class="o">.</span><span class="n">TPlumpinputs</span><span class="o">=</span><span class="n">TPlumpinputs</span>
    <span class="n">myjckt</span><span class="o">.</span><span class="n">TPinputs</span><span class="o">=</span><span class="n">TPinputs</span>
    <span class="n">myjckt</span><span class="o">.</span><span class="n">RNAinputs</span><span class="o">=</span><span class="n">RNAins</span>
    <span class="n">myjckt</span><span class="o">.</span><span class="n">RNAinputs2</span><span class="o">=</span><span class="n">RNAins2</span>
    <span class="n">myjckt</span><span class="o">.</span><span class="n">Twrinputs</span><span class="o">=</span><span class="n">Twrinputs</span>
    <span class="n">myjckt</span><span class="o">.</span><span class="n">TwrRigidTop</span><span class="o">=</span><span class="n">TwrRigidTop</span>
    <span class="n">myjckt</span><span class="o">.</span><span class="n">FrameAuxIns</span><span class="o">=</span><span class="n">FrameAuxIns</span>


</pre></div>
</div>
<p>Then run the assembly:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>    <span class="n">myjckt</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
<p>You may print some of the results of the analysis:</p>
<p>They should look as shown here:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="go">&gt;&gt;&gt;7 nodes in the constant-OD segment of the tower</span>
<span class="go">&gt;&gt;&gt;(&#39;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;  needed embedment Lp0=&#39;, 29.499564957098116)</span>
<span class="go">&gt;&gt;&gt;First two Freqs.= 0.1983 and 0.1994 Hz</span>
<span class="go">&gt;&gt;&gt;jacket+TP(structural+lumped) mass (no tower, no piles) [kg] = 1154582</span>
<span class="go">&gt;&gt;&gt;tower mass [kg] = 335018</span>
<span class="go">&gt;&gt;&gt;TP mass structural + lumped mass [kg] = 335354</span>
<span class="go">&gt;&gt;&gt;piles (all) mass (for assigned (not optimum) Lp [kg] =  48844</span>
<span class="go">&gt;&gt;&gt;frame3dd model mass (structural + TP lumped) [kg] = 1489600</span>
<span class="go">&gt;&gt;&gt;Tower Top Displacement in Global Coordinate System [m] =0.4843</span>
<span class="go">&gt;&gt;&gt;MAX member compression-bending utilization at joints = 0.5608</span>
<span class="go">&gt;&gt;&gt;MAX member tension utilization at joints = 0.6413</span>
<span class="go">&gt;&gt;&gt;MAX X-joint  utilization at joints = 0.2600</span>
<span class="go">&gt;&gt;&gt;MAX K-joint  utilization at joints = 0.3667</span>
</pre></div>
</div>
<p>If you plot the utilization of the tower, you should get something as in Figure <a class="reference internal" href="#utilization-fig"><span class="std std-ref">Utilization along tower height for: Von-Mises/yield; shell buckling; global buckling.</span></a>, where
the Von Mises stress, global and shell buckling utilizations are shown along the tower span.  Each curve represents material utilization and so should be &lt;1 for feasibility.</p>
<div class="figure align-center" id="id2">
<span id="utilization-fig"></span><a class="reference internal image-reference" href="_images/util_tut.png"><img alt="_images/util_tut.png" src="_images/util_tut.png" style="width: 6in;" /></a>
<p class="caption"><span class="caption-text">Figure 2: Utilization along tower height for: Von-Mises/yield; shell buckling; global buckling.</span></p>
</div>
</div>
<div class="section" id="jacket-tower-optimization-openmdao-internal-optimization-driver">
<span id="mdaosnopt-label"></span><h2>5.2. Jacket-Tower Optimization - OpenMDAO Internal Optimization Driver<a class="headerlink" href="#jacket-tower-optimization-openmdao-internal-optimization-driver" title="Permalink to this headline">¶</a></h2>
<p>We begin with the same setup as the previous section, but now we need to set up the optimizer and thus also offer bounds for the design variables:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>        <span class="c1">#          x=  [ batter,  Dpile,    tpile,   Lp,   Dleg,     tleg,       Dbrc,   tbrc,     Dbrc_mud,   tbrc_mud,    Db,   DTRb   Dt,   DTRt   Htwr2fac ]</span>
        <span class="n">MnCnst</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span> <span class="mf">8.</span><span class="p">,</span>      <span class="mf">1.</span><span class="p">,</span>    <span class="mf">1.</span><span class="o">*</span><span class="mf">0.0254</span><span class="p">,</span> <span class="mf">30.</span><span class="p">,</span>   <span class="mf">1.</span><span class="p">,</span>       <span class="mf">1.</span><span class="o">*</span><span class="mf">0.0254</span><span class="p">,</span>  <span class="mf">1.</span><span class="p">,</span>    <span class="mf">1.</span><span class="o">*</span><span class="mf">0.0254</span><span class="p">,</span>   <span class="mf">1.</span><span class="p">,</span>     <span class="mf">1.</span><span class="o">*</span><span class="mf">0.0254</span><span class="p">,</span>    <span class="mf">5.</span><span class="p">,</span>   <span class="mf">120.</span><span class="p">,</span>  <span class="mf">3.</span><span class="p">,</span>   <span class="mf">120.</span><span class="p">,</span>     <span class="mf">0.</span> <span class="p">])</span>
        <span class="n">MxCnst</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span> <span class="mf">15.</span><span class="p">,</span>     <span class="mf">2.5</span><span class="p">,</span>   <span class="mf">5.</span><span class="o">*</span><span class="mf">0.0254</span><span class="p">,</span> <span class="mf">50.</span><span class="p">,</span>   <span class="mf">2.5</span><span class="p">,</span>      <span class="mf">5.</span><span class="o">*</span><span class="mf">0.0254</span><span class="p">,</span>  <span class="mf">2.</span><span class="p">,</span>    <span class="mf">5.</span><span class="o">*</span><span class="mf">0.0254</span><span class="p">,</span>   <span class="mf">2.</span><span class="p">,</span>     <span class="mf">5.</span><span class="o">*</span><span class="mf">0.0254</span><span class="p">,</span>    <span class="mf">7.</span><span class="p">,</span>   <span class="mf">200.</span><span class="p">,</span>  <span class="mf">4.</span><span class="p">,</span>   <span class="mf">200.</span><span class="p">,</span>   <span class="mf">0.25</span> <span class="p">])</span>

</pre></div>
</div>
<p>Also import additional modules for optimization:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>        <span class="kn">from</span> <span class="nn">pyopt_driver.pyopt_driver</span> <span class="kn">import</span> <span class="n">pyOptDriver</span>
        <span class="kn">from</span> <span class="nn">openmdao.lib.casehandlers.api</span> <span class="kn">import</span> <span class="n">DumpCaseRecorder</span>
</pre></div>
</div>
<p>The optimizer must first be selected and configured, in this example use SNOPT.</p>
<p>We now set the objective, and in this example it is normalized to be of order 1 for better convergence behavior.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>        <span class="n">myjckt</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">add_objective</span><span class="p">(</span><span class="s1">&#39;(LoadFrameOuts.Frameouts.mass[0]+LoadFrameOuts.Mpiles)/1.e6&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>The batter,pile OD and thickness, Embedment Length, Leg OD and thickness, X-brace OD and thickness,Mud-brace OD and thickness,Tower base OD and DTR, tower-top OD and DTR, and height of constant cross-section segment are added as design variables.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>        <span class="n">myjckt</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;JcktGeoIn.batter&#39;</span><span class="p">,</span>   <span class="n">low</span><span class="o">=</span><span class="n">MnCnst</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>  <span class="n">high</span><span class="o">=</span><span class="n">MxCnst</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">myjckt</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;Pileinputs.Dpile&#39;</span><span class="p">,</span>   <span class="n">low</span><span class="o">=</span><span class="n">MnCnst</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>  <span class="n">high</span><span class="o">=</span><span class="n">MxCnst</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="n">myjckt</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;Pileinputs.tpile&#39;</span><span class="p">,</span>   <span class="n">low</span><span class="o">=</span><span class="n">MnCnst</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span>  <span class="n">high</span><span class="o">=</span><span class="n">MxCnst</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
        <span class="n">myjckt</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;Pileinputs.Lp&#39;</span><span class="p">,</span>      <span class="n">low</span><span class="o">=</span><span class="n">MnCnst</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span>  <span class="n">high</span><span class="o">=</span><span class="n">MxCnst</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
        <span class="n">myjckt</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;leginputs.Dleg0&#39;</span><span class="p">,</span>    <span class="n">low</span><span class="o">=</span><span class="n">MnCnst</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span>  <span class="n">high</span><span class="o">=</span><span class="n">MxCnst</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span>
        <span class="n">myjckt</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;leginputs.tleg0&#39;</span><span class="p">,</span>    <span class="n">low</span><span class="o">=</span><span class="n">MnCnst</span><span class="p">[</span><span class="mi">5</span><span class="p">],</span>  <span class="n">high</span><span class="o">=</span><span class="n">MxCnst</span><span class="p">[</span><span class="mi">5</span><span class="p">])</span>
        <span class="n">myjckt</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;Xbrcinputs.Dbrc0&#39;</span><span class="p">,</span>   <span class="n">low</span><span class="o">=</span><span class="n">MnCnst</span><span class="p">[</span><span class="mi">6</span><span class="p">],</span>  <span class="n">high</span><span class="o">=</span><span class="n">MxCnst</span><span class="p">[</span><span class="mi">6</span><span class="p">])</span>
        <span class="n">myjckt</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;Xbrcinputs.tbrc0&#39;</span><span class="p">,</span>   <span class="n">low</span><span class="o">=</span><span class="n">MnCnst</span><span class="p">[</span><span class="mi">7</span><span class="p">],</span>  <span class="n">high</span><span class="o">=</span><span class="n">MxCnst</span><span class="p">[</span><span class="mi">7</span><span class="p">])</span>
        <span class="n">myjckt</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;Mbrcinputs.Dbrc_mud&#39;</span><span class="p">,</span><span class="n">low</span><span class="o">=</span><span class="n">MnCnst</span><span class="p">[</span><span class="mi">8</span><span class="p">],</span>  <span class="n">high</span><span class="o">=</span><span class="n">MxCnst</span><span class="p">[</span><span class="mi">8</span><span class="p">])</span>
        <span class="n">myjckt</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;Mbrcinputs.tbrc_mud&#39;</span><span class="p">,</span><span class="n">low</span><span class="o">=</span><span class="n">MnCnst</span><span class="p">[</span><span class="mi">9</span><span class="p">],</span>  <span class="n">high</span><span class="o">=</span><span class="n">MxCnst</span><span class="p">[</span><span class="mi">9</span><span class="p">])</span>
        <span class="n">myjckt</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;Twrinputs.Db&#39;</span><span class="p">,</span>       <span class="n">low</span><span class="o">=</span><span class="n">MnCnst</span><span class="p">[</span><span class="mi">10</span><span class="p">],</span> <span class="n">high</span><span class="o">=</span><span class="n">MxCnst</span><span class="p">[</span><span class="mi">10</span><span class="p">])</span>
        <span class="n">myjckt</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;Twrinputs.DTRb&#39;</span><span class="p">,</span>     <span class="n">low</span><span class="o">=</span><span class="n">MnCnst</span><span class="p">[</span><span class="mi">11</span><span class="p">],</span> <span class="n">high</span><span class="o">=</span><span class="n">MxCnst</span><span class="p">[</span><span class="mi">11</span><span class="p">])</span>
        <span class="n">myjckt</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;Twrinputs.Dt&#39;</span><span class="p">,</span>       <span class="n">low</span><span class="o">=</span><span class="n">MnCnst</span><span class="p">[</span><span class="mi">12</span><span class="p">],</span> <span class="n">high</span><span class="o">=</span><span class="n">MxCnst</span><span class="p">[</span><span class="mi">12</span><span class="p">])</span>
        <span class="n">myjckt</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;Twrinputs.DTRt&#39;</span><span class="p">,</span>     <span class="n">low</span><span class="o">=</span><span class="n">MnCnst</span><span class="p">[</span><span class="mi">13</span><span class="p">],</span> <span class="n">high</span><span class="o">=</span><span class="n">MxCnst</span><span class="p">[</span><span class="mi">13</span><span class="p">])</span>
        <span class="n">myjckt</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s1">&#39;Twrinputs.Htwr2frac&#39;</span><span class="p">,</span><span class="n">low</span><span class="o">=</span><span class="n">MnCnst</span><span class="p">[</span><span class="mi">14</span><span class="p">],</span> <span class="n">high</span><span class="o">=</span><span class="n">MxCnst</span><span class="p">[</span><span class="mi">14</span><span class="p">])</span>

</pre></div>
</div>
<p>Constraints are then added; note that we are after a target first eigenfrequeccy of 0.22 Hz:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>        <span class="n">myjckt</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">add_constraint</span><span class="p">(</span><span class="s1">&#39;LoadFrameOuts.Frameouts.Freqs[0] &gt;=0.22&#39;</span><span class="p">)</span>
        <span class="n">myjckt</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">add_constraint</span><span class="p">(</span><span class="s1">&#39;max(LoadFrameOuts.tower_utilization.GLUtil) &lt;=1.0&#39;</span><span class="p">)</span>
        <span class="n">myjckt</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">add_constraint</span><span class="p">(</span><span class="s1">&#39;max(LoadFrameOuts.tower_utilization.EUshUtil) &lt;=1.0&#39;</span><span class="p">)</span>
        <span class="n">myjckt</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">add_constraint</span><span class="p">(</span><span class="s1">&#39;max(LoadFrameOuts2.tower_utilization.GLUtil) &lt;=1.0&#39;</span><span class="p">)</span>
        <span class="n">myjckt</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">add_constraint</span><span class="p">(</span><span class="s1">&#39;max(LoadFrameOuts2.tower_utilization.EUshUtil) &lt;=1.0&#39;</span><span class="p">)</span>

        <span class="n">myjckt</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">add_constraint</span><span class="p">(</span><span class="s1">&#39;LoadFrameOuts.jacket_utilization.t_util &lt;=1.0&#39;</span><span class="p">)</span>
        <span class="n">myjckt</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">add_constraint</span><span class="p">(</span><span class="s1">&#39;LoadFrameOuts.jacket_utilization.cb_util &lt;=1.0&#39;</span><span class="p">)</span>
        <span class="n">myjckt</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">add_constraint</span><span class="p">(</span><span class="s1">&#39;LoadFrameOuts.jacket_utilization.KjntUtil &lt;= 1.0&#39;</span><span class="p">)</span>
        <span class="n">myjckt</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">add_constraint</span><span class="p">(</span><span class="s1">&#39;LoadFrameOuts.jacket_utilization.XjntUtil &lt;= 1.0&#39;</span><span class="p">)</span>
        <span class="n">myjckt</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">add_constraint</span><span class="p">(</span><span class="s1">&#39;LoadFrameOuts2.jacket_utilization.t_util &lt;=1.0&#39;</span><span class="p">)</span>
        <span class="n">myjckt</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">add_constraint</span><span class="p">(</span><span class="s1">&#39;LoadFrameOuts2.jacket_utilization.cb_util &lt;=1.0&#39;</span><span class="p">)</span>
        <span class="n">myjckt</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">add_constraint</span><span class="p">(</span><span class="s1">&#39;LoadFrameOuts2.jacket_utilization.KjntUtil &lt;= 1.0&#39;</span><span class="p">)</span>
        <span class="n">myjckt</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">add_constraint</span><span class="p">(</span><span class="s1">&#39;LoadFrameOuts2.jacket_utilization.XjntUtil &lt;= 1.0&#39;</span><span class="p">)</span>

        <span class="n">myjckt</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">add_constraint</span><span class="p">(</span><span class="s1">&#39;PreBuild.wbase &lt;= 30.&#39;</span><span class="p">)</span>
        <span class="n">myjckt</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">add_constraint</span><span class="p">(</span><span class="s1">&#39;leginputs.Dleg0/leginputs.tleg0 &gt;= 22.&#39;</span><span class="p">)</span>
        <span class="n">myjckt</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">add_constraint</span><span class="p">(</span><span class="s1">&#39;Xbrcinputs.Dbrc0/Xbrcinputs.tbrc0 &gt;= 22.&#39;</span><span class="p">)</span>
        <span class="n">myjckt</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">add_constraint</span><span class="p">(</span><span class="s1">&#39;Mbrcinputs.Dbrc_mud/Mbrcinputs.tbrc_mud &gt;= 22.&#39;</span><span class="p">)</span>

        <span class="n">myjckt</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">add_constraint</span><span class="p">(</span><span class="s1">&#39;LoadFrameOuts.Lp0rat &gt;= 0.&#39;</span><span class="p">)</span>
        <span class="n">myjckt</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="n">add_constraint</span><span class="p">(</span><span class="s1">&#39;LoadFrameOuts2.Lp0rat &gt;= 0.&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>A recorder is added to display each iteration to the screen.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>        <span class="n">myjckt</span><span class="o">.</span><span class="n">recorders</span> <span class="o">=</span> <span class="p">[</span><span class="n">DumpCaseRecorder</span><span class="p">(</span><span class="s1">&#39;optimization.dat&#39;</span><span class="p">)]</span>
</pre></div>
</div>
<p>Now the optimization can be run.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>    <span class="n">myjckt</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
<p>THe final configuration skeleton is shown in Figure <a class="reference internal" href="#jacket-tower-tutopt"><span class="std std-ref">Jacket-tower structure for the tutorial example after OpenMDAO driven optimization via SNOPT.</span></a>.
If you plot the utilization of the tower, you should get something as in Figure <a class="reference internal" href="#utilopt-fig"><span class="std std-ref">Utilization along tower height for: Von-Mises/yield; shell buckling; global buckling. Optimization obtained via OpenMDAO pyOPT driver with SNOPT.</span></a>, where
the Von Mises stress, global and shell buckling utilizations are shown along the tower span.  Each is a utilization and so should be &lt;1 for feasibility.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="go">&gt;&gt;&gt;7 nodes in the constant-OD segment of the tower</span>
<span class="go">&gt;&gt;&gt;(&#39;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;  needed embedment Lp0=&#39;, 41.880993761055052)</span>
<span class="go">&gt;&gt;&gt;First two Freqs.= 0.2143 and 0.2154 Hz</span>
<span class="go">&gt;&gt;&gt;jacket+TP(structural+lumped) mass (no tower, no piles) [kg] = 1135683</span>
<span class="go">&gt;&gt;&gt;tower mass [kg] = 396546</span>
<span class="go">&gt;&gt;&gt;TP mass structural + lumped mass [kg] = 347611</span>
<span class="go">&gt;&gt;&gt;piles (all) mass (for assigned (not optimum) Lp [kg] =  94910</span>
<span class="go">&gt;&gt;&gt;frame3dd model mass (structural + TP lumped) [kg] = 1532229</span>
<span class="go">&gt;&gt;&gt;Tower Top Displacement in Global Coordinate System [m] =0.4437</span>
<span class="go">&gt;&gt;&gt;MAX member compression-bending utilization at joints = 0.5559</span>
<span class="go">&gt;&gt;&gt;MAX member tension utilization at joints = 0.6590</span>
<span class="go">&gt;&gt;&gt;MAX X-joint  utilization at joints = 0.2586</span>
<span class="go">&gt;&gt;&gt;MAX K-joint  utilization at joints = 0.3807</span>
</pre></div>
</div>
<p>The total mass of the jacket, tower, and TP (both structural and lumped mass), and piles is 1,627,139 kg.
Also note that the first natural frequencies do NOT match the requirement &gt;0.22 Hz.</p>
<div class="figure align-center" id="id3">
<span id="jacket-tower-tutopt"></span><a class="reference internal image-reference" href="_images/jacket_tower_tutOpt.png"><img alt="_images/jacket_tower_tutOpt.png" src="_images/jacket_tower_tutOpt.png" style="width: 6in;" /></a>
<p class="caption"><span class="caption-text">Figure 3: Jacket-tower structure for the tutorial example after OpenMDAO driven optimization via SNOPT.</span></p>
</div>
<div class="figure align-center" id="id4">
<span id="utilopt-fig"></span><a class="reference internal image-reference" href="_images/util_tutOpt.png"><img alt="_images/util_tutOpt.png" src="_images/util_tutOpt.png" style="width: 6in;" /></a>
<p class="caption"><span class="caption-text">Figure 4: Utilization along tower height for: Von-Mises/yield; shell buckling; global buckling. Optimization obtained via OpenMDAO pyOPT driver with SNOPT.</span></p>
</div>
</div>
<div class="section" id="jacket-tower-optimization-external-optimization-via-pyopt">
<span id="my-reference-label"></span><h2>5.3. Jacket-Tower Optimization - External Optimization via PyOPT<a class="headerlink" href="#jacket-tower-optimization-external-optimization-via-pyopt" title="Permalink to this headline">¶</a></h2>
<p>For this tutorial, we use an auxiliary module <em>JacketOpt_PyOPT.py</em> and the auxiliary input file <em>MyJacketInputs.py</em>.
The new module is just a wrapper for jacketSE and contains: calls to the pyOPT optimization package to perform the optimization,
objective function and constraints. The input file contains the same jacket input information as in the previous example.</p>
<p>We simply run a SNOPT optimization case by issuing:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="go">&gt;&gt;&gt;python JacketOpt_PyOPT.py MyJacketInputs.py True</span>
</pre></div>
</div>
<p>The run terminates with the following results:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="go">&gt;&gt;&gt;7 nodes in the constant-OD segment of the tower</span>
<span class="go">&gt;&gt;&gt;(&#39;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;  needed embedment Lp0=&#39;, 27.634632160831377)</span>
<span class="go">&gt;&gt;&gt;Jwrapper SOLUTION: bat= 9.48, Dpile= 2.45, tpile=0.025, Lp= 27.6 Dleg 1.14, tleg0.032</span>
<span class="gp">&gt;&gt;&gt; </span>       <span class="n">dck_width</span> <span class="o">=</span><span class="mf">12.76</span><span class="p">,</span>    <span class="n">Dbrc</span><span class="o">=</span> <span class="mf">1.00</span><span class="p">,</span> <span class="n">tbrc</span><span class="o">=</span><span class="mf">0.025</span><span class="p">,</span> <span class="n">Dmudbrc</span><span class="o">=</span> <span class="mf">1.00</span><span class="p">,</span> <span class="n">tmudbrc</span><span class="o">=</span><span class="mf">0.025</span>
<span class="go">&gt;&gt;&gt;from Jwrapper Db= 6.38, DTRb=139.88, Dt= 3.21, DTRt=139.88,H2twrfrac= 0.25, Dgir= 1.00,tgir=0.025, Twrmass=413487.941, PilesMass =187056.839, TPmass= 1.424e+05, Frame3DD+Piles Totmass=1477428.623</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="go">&gt;&gt;&gt;Minimum mass Mjacket, MPiles, TPmass = 1290371.783880 187056.839229 142411.694364</span>
<span class="go">&gt;&gt;&gt;Minimum mass Tower, Jacket(no tower no piles) = 413487.941068 876883.842813</span>
<span class="go">&gt;&gt;&gt;Minimum found at Dpile=2.451534, tpile=0.025400  Lp=27.634661</span>
<span class="go">&gt;&gt;&gt;Minimum found at Dbrc=1.000000, tbrc=0.025400</span>
<span class="go">&gt;&gt;&gt;Minimum found at Dbrcmud=1.000000, tbrcmud=0.025400</span>
<span class="go">&gt;&gt;&gt;Minimum found at batter=9.476407, dckwidth=12.758457, Dleg=1.138723, tleg=0.031565,</span>
<span class="go">&gt;&gt;&gt;Minimum found at Dgir=1.000084, tgir=0.025400</span>
<span class="go">&gt;&gt;&gt;Minimum found at Db=6.379229 DTRb=139.882073 Dt=3.208883 DTRt=139.882073 H2frac=0.250000</span>
<span class="go">&gt;&gt;&gt;Minimum found at Freq 0.220003</span>
<span class="go">&gt;&gt;&gt;Minimum found at GLutil=0.734957 EUutil=0.195177</span>
<span class="go">&gt;&gt;&gt;Minimum found at Mudline Footprint=20.758694</span>
<span class="go">&gt;&gt;&gt;Elapsed time:  4514.93799996 seconds</span>
<span class="go">&gt;&gt;&gt;Execution count:  3422</span>
</pre></div>
</div>
<p>The total mass of the jacket, tower, and TP (both structural and lumped mass), and piles is  1,677,428 kg.
Note that in this case the frequency constraint is met.</p>
<div class="figure align-center" id="id5">
<span id="jacket-extpysnopt-fig"></span><a class="reference internal image-reference" href="_images/jacket_ExtPySnopt.png"><img alt="_images/jacket_ExtPySnopt.png" src="_images/jacket_ExtPySnopt.png" style="width: 6in;" /></a>
<p class="caption"><span class="caption-text">Figure 5: Jacket-tower structure for the tutorial example after OpenMDAO driven optimization via SNOPT.</span></p>
</div>
<div class="figure align-center" id="id6">
<span id="utilextopt-fig"></span><a class="reference internal image-reference" href="_images/util_ExtPySnopt.png"><img alt="_images/util_ExtPySnopt.png" src="_images/util_ExtPySnopt.png" style="width: 6in;" /></a>
<p class="caption"><span class="caption-text">Figure 6: Utilization along tower height for: Von-Mises/yield; shell buckling; global buckling. Optimization obtained via pyOPT SNOPT.</span></p>
</div>
</div>
<div class="section" id="jacket-tower-optimization-external-optimization-via-python-cobyla">
<h2>5.4. Jacket-Tower Optimization - External Optimization via Python Cobyla<a class="headerlink" href="#jacket-tower-optimization-external-optimization-via-python-cobyla" title="Permalink to this headline">¶</a></h2>
<p>For this tutorial, we use an auxiliary module <em>JacketOpt_ExtCobyla.py</em> and the same auxiliary input file <em>MyJacketInputs.py</em> as above.
The new module is just a wrapper for jacketSE and contains: calls to the python function <em>scipy.optimize.fmin_cobyla</em> to perform the optimization,
objective function and constraints. The input file contains the same jacket input information as in the previous example.</p>
<p>We start by simply running:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="go">&gt;&gt;&gt;python JacketOpt_ExtCobyla.py MyJacketInputs.py</span>
</pre></div>
</div>
<p>The run terminates with the following results:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="go">&gt;&gt;&gt;7 nodes in the constant-OD segment of the tower</span>
<span class="go">&gt;&gt;&gt;(&#39;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;  needed embedment Lp0=&#39;, 46.965381137541016)</span>
<span class="go">&gt;&gt;&gt;Jwrapper SOLUTION: bat=15.00, Dpile= 1.00, tpile=0.025, Lp= 47.0 Dleg 1.50, tleg 0.025</span>
<span class="gp">&gt;&gt;&gt; </span>           <span class="n">dck_width</span> <span class="o">=</span><span class="mf">13.92</span><span class="p">,</span> <span class="n">Dbrc</span><span class="o">=</span> <span class="mf">1.00</span><span class="p">,</span> <span class="n">tbrc</span><span class="o">=</span><span class="mf">0.025</span><span class="p">,</span> <span class="n">Dmudbrc</span><span class="o">=</span> <span class="mf">1.00</span><span class="p">,</span> <span class="n">tmudbrc</span><span class="o">=</span><span class="mf">0.025</span>
<span class="go">&gt;&gt;&gt;from Jwrapper Db= 6.96, DTRb=200.00, Dt= 3.62, DTRt=200.00,H2twrfrac= 0.25, Dgir= 1.00,tgir=0.025, Twrmass=349424.881, PilesMass =127705.311, TPmass= 1.353e+05, Frame3DD+Piles Totmass=1330334.683</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="go">&gt;&gt;&gt;Minimum mass Mjacket, MPiles, TPmass = 1202629.371883 127705.310878 135269.829145</span>
<span class="go">&gt;&gt;&gt;Minimum mass Tower, Jacket(no tower no piles) = 349424.880736 853204.491147</span>
<span class="go">&gt;&gt;&gt;Minimum found at Dpile=1.000000, tpile=0.025400  Lp=46.965381</span>
<span class="go">&gt;&gt;&gt;Minimum found at Dbrc=1.000000, tbrc=0.025400</span>
<span class="go">&gt;&gt;&gt;Minimum found at Dbrcmud=1.000000, tbrcmud=0.025400</span>
<span class="go">&gt;&gt;&gt;Minimum found at batter=15.000000, dckwidth=13.921647, Dleg=1.497250, tleg=0.025400,</span>
<span class="go">&gt;&gt;&gt;Minimum found at Dgir=1.000000, tgir=0.025400</span>
<span class="go">&gt;&gt;&gt;Minimum found at Db=6.960824 DTRb=200.000000 Dt=3.620849 DTRt=200.000000 H2frac=0.250000</span>
<span class="go">&gt;&gt;&gt;Minimum found at Freq 0.220000</span>
<span class="go">&gt;&gt;&gt;Minimum found at GLutil=0.679969 EUutil=0.291541</span>
<span class="go">&gt;&gt;&gt;Minimum found at Mudline Footprint=17.809106 beta3D=54.979833</span>
</pre></div>
</div>
<p>The overall mass (jacket, tower, TP (structural and lumped mass), and piles amounts to 1,530,334 kg, which is less than the optimum found in the previous optimizations.</p>
<p>Cobyla seems to perform better than the other optimization options.</p>
<blockquote id="jacketopt-cobyoptconfig-fig">
<div><div class="figure align-center" id="id7">
<a class="reference internal image-reference" href="_images/JacketOpt_CobyOptConfig.png"><img alt="_images/JacketOpt_CobyOptConfig.png" src="_images/JacketOpt_CobyOptConfig.png" style="width: 6in;" /></a>
<p class="caption"><span class="caption-text">Figure 7: Jacket-tower structure for the tutorial example after OpenMDAO driven optimization via SNOPT.</span></p>
</div>
</div></blockquote>
<blockquote id="util-tutcobyopt-fig">
<div><div class="figure align-center" id="id8">
<a class="reference internal image-reference" href="_images/util_tutCobyOpt.png"><img alt="_images/util_tutCobyOpt.png" src="_images/util_tutCobyOpt.png" style="width: 6in;" /></a>
<p class="caption"><span class="caption-text">Figure 8: Utilization along tower height for: Von-Mises/yield; shell buckling; global buckling. Optimization obtained via fmin_cobyla.</span></p>
</div>
</div></blockquote>
</div>
<div class="section" id="jacket-tower-optimization-optimization-via-openmdaos-cobyla-non-pyopt">
<span id="mdaocoby"></span><h2>5.5. Jacket-Tower Optimization - Optimization via OpenMDAOs Cobyla (non-PyOPT)<a class="headerlink" href="#jacket-tower-optimization-optimization-via-openmdaos-cobyla-non-pyopt" title="Permalink to this headline">¶</a></h2>
<p>For this tutorial, we repeat what was done in Section <a class="reference internal" href="#mdaosnopt-label"><span class="std std-ref">Jacket-Tower Optimization - OpenMDAO Internal Optimization Driver</span></a>
and this time use the simple COBYLAdriver, not the PyOPTdriver.
The input file contains the same jacket input information as in the previous example.</p>
<p>We start by simply running:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="go">&gt;&gt;&gt;python jacket.py True Cobyla</span>
</pre></div>
</div>
<p>The run terminates with the following results:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span>  <span class="n">Return</span> <span class="kn">from</span> <span class="nn">subroutine</span> <span class="n">COBYLA</span> <span class="n">because</span> <span class="n">the</span> <span class="n">MAXFUN</span> <span class="n">limit</span> <span class="n">has</span> <span class="n">been</span> <span class="n">reached</span><span class="o">.</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span>  <span class="n">NFVALS</span> <span class="o">=</span>    <span class="mi">2000</span>   <span class="n">F</span> <span class="o">=</span> <span class="mf">1.450805E+00</span>    <span class="n">MAXCV</span> <span class="o">=</span> <span class="mf">1.500592E-06</span>
<span class="gp">&gt;&gt;&gt; </span>  <span class="n">X</span> <span class="o">=</span> <span class="mf">1.204965E+01</span>   <span class="mf">1.494575E+00</span>   <span class="mf">2.540000E-02</span>   <span class="mf">3.000000E+01</span>   <span class="mf">1.488532E+00</span>
<span class="gp">&gt;&gt;&gt; </span>      <span class="mf">2.540000E-02</span>   <span class="mf">1.000000E+00</span>   <span class="mf">2.540000E-02</span>   <span class="mf">1.000000E+00</span>   <span class="mf">2.540000E-02</span>
<span class="gp">&gt;&gt;&gt; </span>      <span class="mf">6.194941E+00</span>   <span class="mf">1.300558E+02</span>   <span class="mf">3.144349E+00</span>   <span class="mf">1.500515E+02</span>   <span class="mf">2.500000E-01</span>
<span class="go">&gt;&gt;&gt;First two Freqs.= 0.2200 and 0.2211 Hz</span>
<span class="go">&gt;&gt;&gt;jacket+TP(structural+lumped) mass (no tower, no piles) [kg] = 1130736</span>
<span class="go">&gt;&gt;&gt;tower mass [kg] = 410342</span>
<span class="go">&gt;&gt;&gt;TP mass structural + lumped mass [kg] = 346367</span>
<span class="go">&gt;&gt;&gt;piles (all) mass (for assigned (not optimum, unless optimization is run) Lp [kg] = 109657</span>
<span class="go">&gt;&gt;&gt;frame3dd model mass (structural + TP lumped) [kg] = 1541078</span>
<span class="go">&gt;&gt;&gt;frame3dd model mass (structural + TP lumped) + Pile Mass [kg] = 1650735</span>
<span class="go">&gt;&gt;&gt;Tower Top Displacement in Global Coordinate System [m] =0.4146</span>
<span class="go">&gt;&gt;&gt;MAX member compression-bending utilization at joints = 0.5647</span>
<span class="go">&gt;&gt;&gt;MAX member tension utilization at joints = 0.6596</span>
<span class="go">&gt;&gt;&gt;MAX X-joint  utilization at joints = 0.2544</span>
<span class="go">&gt;&gt;&gt;MAX K-joint  utilization at joints = 0.3807</span>
</pre></div>
</div>
<p>The overall mass (jacket, tower, TP (structural and lumped mass), and piles amounts to 1,650,735 kg, which is still greater than the optimum found with teh external Cobyla, however, the maximum number of iterations was reached in this case.</p>
<p>Cobyla seems to perform better than the other optimization options.</p>
<blockquote id="jacketopt-mdaocobyconfig-fig">
<div><div class="figure align-center" id="id9">
<a class="reference internal image-reference" href="./images/JacketOpt_MDAOCobyConfig.*"><img alt="./images/JacketOpt_MDAOCobyConfig.*" src="./images/JacketOpt_MDAOCobyConfig.*" style="width: 6in;" /></a>
<p class="caption"><span class="caption-text">Figure 9: Jacket-tower structure for the tutorial example after OpenMDAO driven optimization via COBYLA driver.</span></p>
</div>
</div></blockquote>
<blockquote id="util-tutmdaocoby-fig">
<div><div class="figure align-center" id="id10">
<a class="reference internal image-reference" href="_images/util_tutMDAOCoby.png"><img alt="_images/util_tutMDAOCoby.png" src="_images/util_tutMDAOCoby.png" style="width: 6in;" /></a>
<p class="caption"><span class="caption-text">Figure 10: Utilization along tower height for: Von-Mises/yield; shell buckling; global buckling. Optimization obtained via MDAO COBYLA driver.</span></p>
</div>
</div></blockquote>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">5. Tutorial</a><ul>
<li><a class="reference internal" href="#mw-jacket-tower-in-30-m-waters">5.1. 5-MW Jacket Tower in 30 m Waters</a></li>
<li><a class="reference internal" href="#jacket-tower-optimization-openmdao-internal-optimization-driver">5.2. Jacket-Tower Optimization - OpenMDAO Internal Optimization Driver</a></li>
<li><a class="reference internal" href="#jacket-tower-optimization-external-optimization-via-pyopt">5.3. Jacket-Tower Optimization - External Optimization via PyOPT</a></li>
<li><a class="reference internal" href="#jacket-tower-optimization-external-optimization-via-python-cobyla">5.4. Jacket-Tower Optimization - External Optimization via Python Cobyla</a></li>
<li><a class="reference internal" href="#jacket-tower-optimization-optimization-via-openmdaos-cobyla-non-pyopt">5.5. Jacket-Tower Optimization - Optimization via OpenMDAOs Cobyla (non-PyOPT)</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="theory.html"
                        title="previous chapter">4. Theory</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/tutorial.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="theory.html" title="4. Theory"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">JacketSE 0.1.1 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2014, NREL.
      Last updated on Apr 08, 2019.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.6.
    </div>
  </body>
</html>